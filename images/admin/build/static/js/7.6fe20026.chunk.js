(this["webpackJsonpadmin-ciutat_agora"]=this["webpackJsonpadmin-ciutat_agora"]||[]).push([[7],{518:function(e,t,r){"use strict";r.r(t);var n=r(2),o=r(70),a=r(4),i=r(56),s=r(303),l=r(438),u=r(0),c=Object(o.observer)((function(e){var t=e.filtre;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.Fields.Input,{name:"text",label:"V\xeddeo",startIcon:Object(u.jsx)(s.a,{}),onChange:function(e){var r=e.target,n=r.name,o=r.value;t.setCerca(Object(i.a)(Object(i.a)({},t.cerca),{},Object(a.a)({},n,o)))}})})})),d=Object(o.observer)((function(e){var t=e.state,r=e.filtre;n.useEffect((function(){r.setObjs(t.objs)}),[t.objs,r]);var o=r.getItems().map((function(e,r){return{titol:e.ordre+". "+e.nom,onClick:function(){return t.onEdit(e)},onEdit:function(){return t.onEdit(e)},onDelete:function(){return t.onDel(e)}}}));return Object(u.jsx)(l.WebLlistat,{header:Object(u.jsx)(c,{filtre:r}),footer:Object(u.jsx)(l.WebPaginacio,{filtres:r}),items:o})})),j=r(319),b=r(298),m=r(299),g=Object(o.observer)((function(e){var t=e.state,r=n.useContext(j.appState),o=r.autorsState,a=t.objSel,i=new l.FilterState;i.setRowsPerPage(5),i.setFilter(o.cercarGenerica);var s=[],c=[],d=[];return a.temes&&(s=a.temes.map((function(e,r){var n=e.id<0;return{titol:t.temes.getNomTema(e),disabled:n}}))),a.autors&&(c=a.autors.map((function(e,r){var n=e.id<0;return{titol:t.autors.getNom(e),disabled:n}}))),a.documents&&(d=a.documents.map((function(e,r){var n=e.id<0;return{titol:t.documents.getNom(e),disabled:n,onClick:n?void 0:function(){return t.documents.onEdit(e)},onEdit:n?void 0:function(){return t.documents.onEdit(e)},onDelete:n?void 0:function(){return t.documents.onDel(e)}}}))),Object(u.jsxs)(l.WebDialog,{open:t.openPopup,titol:"V\xeddeos",descripcio:"Editar o afegit v\xeddeos",onSave:t.onSave,onClose:t.onClose,fullscreen:!0,children:[Object(u.jsxs)(l.WebForm,{children:[Object(u.jsx)(l.Fields.Input,{name:"ordre",required:!0,label:"Posici\xf3",value:a.ordre,onChange:t.onChange,onBlur:t.validateSingleError,xs:3,textError:t.errors.ordre}),Object(u.jsx)(l.Fields.Input,{name:"nom",required:!0,label:"Nom",value:a.nom,onChange:t.onChange,onBlur:t.validateSingleError,flexGrow:!0,textError:t.errors.nom}),Object(u.jsx)(l.Fields.NewLine,{}),Object(u.jsx)(l.Fields.Input,{name:"url_video",label:"Adre\xe7a del v\xeddeo",value:a.url_video,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,md:6,textError:t.errors.url_video}),Object(u.jsx)(l.Fields.Input,{name:"durada",label:"Durada del v\xeddeo",value:a.durada,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,md:3,textError:t.errors.durada}),Object(u.jsx)(l.Fields.DatePicker,{name:"data_video",label:"Data",required:!0,xs:12,md:3,value:a.data_video,onChange:t.onChangeDate,onBlur:t.validateSingleError,textError:t.errors.data_video}),Object(u.jsx)(l.Fields.Input,{name:"resum",label:"Resum",value:a.resum,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,textError:t.errors.resum}),Object(u.jsx)(l.Fields.EditorHtml,{name:"text",value:a.text,label:"Text",onChange:t.onChange,xs:12,sourceTinyMce:"/admin/ciutatagora/tinymce/tinymce.min.js"}),Object(u.jsx)(l.Fields.Switch,{name:"destacat",label:"Destacat",value:a.destacat,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,md:6,textError:t.errors.destacat}),Object(u.jsx)(l.Fields.Select,{name:"id_projecte",label:"Projecte",value:a.id_projecte,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,md:6,textError:t.errors.id_projecte,items:t.getProjectes()})]}),Object(u.jsx)(l.Fields.Titol,{titol:"Autors",onAdd:function(){return t.autors.onAdd()},titolButton:"Editar"}),Object(u.jsx)(l.WebLlistat,{items:c}),Object(u.jsx)(v,{state:t.autors,stateAutors:o,filtre:i}),Object(u.jsx)(l.Fields.Titol,{titol:"Temes",onAdd:function(){return t.temes.onAdd()},titolButton:"Editar"}),Object(u.jsx)(l.WebLlistat,{items:s}),Object(u.jsx)(x,{state:t.temes}),Object(u.jsx)(l.Fields.Titol,{titol:"Proposta did\xe0ctica",onAdd:function(){return t.documents.onAdd()}}),Object(u.jsx)(l.WebLlistat,{items:d}),Object(u.jsx)(O,{state:t.documents}),Object(u.jsx)(l.Fields.Titol,{titol:"Imatges"}),Object(u.jsxs)(l.WebForm,{children:[Object(u.jsx)(l.Fields.UploadFile,{name:"imatge_v",label:"Imatge Vertical",required:!0,value:a.imatge_v,xs:12,md:6,textError:t.errors.imatge_v,onChange:t.onChange,domainMedia:r.urlMedia,onLoad:function(e){return t.fileUpload(e)},onDelImg:function(e){return t.onDelImg("imatge_v",e)}}),Object(u.jsx)(l.Fields.UploadFile,{name:"imatge_h",label:"Imatge Horitzontal",required:!0,value:a.imatge_h,xs:12,md:6,textError:t.errors.imatge_h,onChange:t.onChange,domainMedia:r.urlMedia,onLoad:function(e){return t.fileUpload(e)},onDelImg:function(e){return t.onDelImg("imatge_h",e)}})]}),Object(u.jsx)(l.Fields.Titol,{titol:"Altres adreces"}),Object(u.jsxs)(l.WebForm,{children:[Object(u.jsx)(l.Fields.Input,{name:"url_subtitols",label:"Adre\xe7a amb subt\xedtols",value:a.url_subtitols,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,textError:t.errors.url_subtitols}),Object(u.jsx)(l.Fields.Input,{name:"url_podcast",label:"Adre\xe7a del podcast",value:a.url_podcast,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,textError:t.errors.url_podcast}),Object(u.jsx)(l.Fields.Input,{name:"url_versio_original",label:"Adre\xe7a de la versi\xf3 original del v\xeddeo",value:a.url_versio_original,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,textError:t.errors.url_versio_original}),Object(u.jsx)(l.Fields.Input,{name:"url_versio_eng",label:"Adre\xe7a de la versi\xf3 en angl\xe8s del v\xeddeo",value:a.url_versio_eng,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,textError:t.errors.url_versio_eng})]})]})})),x=Object(o.observer)((function(e){var t=e.state,r=t.getTemes().map((function(e,r){var n=t.objs.filter((function(t){return t.id>=0&&t.id_tema===e.id})).length>0;return{titol:e.titol,icona:n?Object(u.jsx)(b.a,{color:"success"}):Object(u.jsx)(m.a,{}),onClick:function(){return t.onSelect(e.id)}}}));return Object(u.jsx)(l.WebDialog,{open:t.openPopup,titol:"Temes",onSave:t.onSave,onClose:function(){return t.onClose()},fullscreen:!1,children:Object(u.jsx)(l.WebLlistat,{items:r})})})),v=Object(o.observer)((function(e){var t=e.filtre,r=e.state,o=e.stateAutors;n.useEffect((function(){t.setObjs(o.objs)}),[o.objs,t]);var a=t.getItems().map((function(e,t){var n=r.objs.filter((function(t){return t.id>=0&&t.id_autor===e.id})).length>0;return{titol:e.nom,icona:n?Object(u.jsx)(b.a,{color:"success"}):Object(u.jsx)(m.a,{}),onClick:function(){return r.onSelect(e.id)}}}));return Object(u.jsx)(l.WebDialog,{open:r.openPopup,titol:"Autors",onSave:r.onSave,onClose:function(){return r.onClose()},fullscreen:!1,children:Object(u.jsx)(l.WebLlistat,{items:a,header:Object(u.jsx)(f,{filtre:t,state:o}),footer:Object(u.jsx)(l.WebPaginacio,{filtres:t})})})})),f=Object(o.observer)((function(e){e.state;var t=e.filtre;return Object(u.jsx)(u.Fragment,{children:Object(u.jsx)(l.Fields.Input,{name:"text",label:"Autor",startIcon:Object(u.jsx)(s.a,{}),onChange:function(e){var r=e.target,n=r.name,o=r.value;t.setCerca(Object(i.a)(Object(i.a)({},t.cerca),{},Object(a.a)({},n,o)))}})})})),O=Object(o.observer)((function(e){var t=e.state,r=n.useContext(j.appState),o=t.objSel;return Object(u.jsx)(l.WebDialog,{open:t.openPopup,titol:"Proposta did\xe0ctica",onSave:t.onSave,onClose:function(){return t.onClose()},fullscreen:!1,children:Object(u.jsxs)(l.WebForm,{children:[Object(u.jsx)(l.Fields.Input,{name:"nom_document",required:!0,label:"Nom",value:o.nom_document,onChange:t.onChange,onBlur:t.validateSingleError,xs:12,textError:t.errors.nom_document}),Object(u.jsx)(l.Fields.UploadFile,{name:"url_document",label:"Document",required:!0,value:o.url_document,xs:12,md:6,textError:t.errors.url_document,onChange:t.onChange,domainMedia:r.urlMedia,onLoad:function(e){return t.fileUpload(e)},onDelImg:function(e){return t.onDelImg("url_document",e)},tipus:"pdf"})]})})}));t.default=function(){var e=n.useContext(j.appState).videosState;n.useEffect((function(){e.onLoad()}));var t=new l.FilterState;return t.setRowsPerPage(10),t.setFilter(e.cercarGenerica),Object(u.jsxs)(l.WebPant,{titol:"V\xeddeos",onAdd:function(){return e.onAdd()},tipusAdd:"action",children:[Object(u.jsx)(d,{state:e,filtre:t}),Object(u.jsx)(g,{state:e})]})}}}]);